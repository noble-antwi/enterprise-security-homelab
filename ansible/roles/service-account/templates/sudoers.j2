# ===================================================================
# ANSIBLE SERVICE ACCOUNT SUDOERS CONFIGURATION
# ===================================================================
# 
# Generated by Ansible on {{ ansible_date_time.iso8601 }}
# Target System: {{ ansible_hostname }} ({{ ansible_default_ipv4.address }})
# Service Account: {{ service_account_user }}
# 
# PURPOSE: Provides passwordless sudo access for automation workflows
# SECURITY: Limited to service account with SSH key access only
# ===================================================================

# Allow service account to run any command without password
{{ service_account_user }} ALL=(ALL) NOPASSWD: ALL

{% if not service_account_sudo_requiretty %}
# Don't require TTY for automation (allows remote sudo execution)
Defaults:{{ service_account_user }} !requiretty
{% endif %}

# Additional security settings
Defaults:{{ service_account_user }} !visiblepw
Defaults:{{ service_account_user }} always_set_home
Defaults:{{ service_account_user }} match_group_by_gid

# Logging configuration
Defaults:{{ service_account_user }} log_host, log_year, logfile="/var/log/sudo-{{ service_account_user }}.log"

# ===================================================================
# SECURITY NOTES:
# - This account can only be accessed via SSH key authentication
# - No password login is permitted for this account
# - All sudo activity is logged for audit purposes
# - Personal accounts (nantwi) maintain separate access controls
# ===================================================================
